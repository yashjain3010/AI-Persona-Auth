# ===================================
# AI-Persona Backend Environment Variables
# ===================================
# This file serves as a template for environment configuration.
# Copy this file to .env and update with your actual values.

# ===================================
# NODE ENVIRONMENT
# ===================================
NODE_ENV=development
TZ=UTC

# ===================================
# APPLICATION SETTINGS
# ===================================
APP_NAME=AI-Persona-Backend
APP_VERSION=1.0.0
API_URL=http://localhost:3000
CLIENT_URL=http://localhost:3001

# ===================================
# SERVER CONFIGURATION
# ===================================
PORT=3000
HOST=0.0.0.0
BODY_LIMIT=10mb
SOCKET_TIMEOUT=120000

# Production server settings
TRUST_PROXY=true
ENABLE_CLUSTER=false
MAX_WORKERS=4
ENABLE_HTTPS=false

# Health and monitoring
HEALTH_CHECK_INTERVAL=30000
SHUTDOWN_TIMEOUT=30000
MAX_MEMORY_USAGE=1024

# ===================================
# DATABASE CONFIGURATION
# ===================================
DATABASE_URL=postgresql://username:password@localhost:5432/ai_persona_dev
DATABASE_SSL=false
DATABASE_POOL_SIZE=10
DATABASE_CONNECTION_TIMEOUT=10000
DATABASE_QUERY_TIMEOUT=30000
RUN_MIGRATIONS_ON_STARTUP=false

# ===================================
# AUTHENTICATION & SECURITY
# ===================================
# JWT Configuration (Generate with: openssl rand -hex 32)
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters-long
JWT_REFRESH_SECRET=your-super-secret-refresh-key-at-least-32-characters-long
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=ai-persona-backend
JWT_AUDIENCE=ai-persona-app

# Password Security
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Session Management
MAX_CONCURRENT_SESSIONS=5
SESSION_CLEANUP_INTERVAL=3600000

# Cookie Security (Generate with: openssl rand -hex 32)
COOKIE_SECRET=your-super-secret-cookie-key-at-least-32-characters-long

# ===================================
# OAUTH PROVIDERS
# ===================================
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=/api/auth/google/callback

# Microsoft OAuth
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALLBACK_URL=/api/auth/microsoft/callback
MICROSOFT_TENANT=common

# ===================================
# EMAIL CONFIGURATION
# ===================================
EMAIL_PROVIDER=smtp

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email Settings
FROM_NAME=AI-Persona
FROM_EMAIL=noreply@ai-persona.com

# Email Rate Limiting
EMAIL_RATE_LIMIT=100
EMAIL_DAILY_LIMIT=1000

# ===================================
# SECURITY SETTINGS
# ===================================
# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Auth-specific Rate Limiting
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# CORS Configuration
CORS_ORIGIN=http://localhost:3001,http://localhost:3000
CORS_CREDENTIALS=true

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# ===================================
# LOGGING CONFIGURATION
# ===================================
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=true

# External Logging (Optional)
LOG_HTTP_ENDPOINT=
LOG_HTTP_HOST=
LOG_HTTP_PORT=443
LOG_HTTP_PATH=/logs
LOG_HTTP_SSL=true
LOG_HTTP_AUTH=

# ===================================
# WORKSPACE & MULTI-TENANCY
# ===================================
# Blocked personal email domains
BLOCKED_DOMAINS=gmail.com,yahoo.com,hotmail.com,outlook.com,icloud.com,aol.com,protonmail.com,mail.com

# Workspace Settings
AUTO_CREATE_WORKSPACE=true
MAX_MEMBERS_PER_WORKSPACE=1000
INVITE_EXPIRY_HOURS=168
MAX_PENDING_INVITES=50

# ===================================
# DOCUMENTATION
# ===================================
DOCS_ENABLED=true
DOCS_PATH=/api-docs

# ===================================
# DEVELOPMENT SETTINGS
# ===================================
ENABLE_API_DOCS=true
ENABLE_DEBUG_ROUTES=false
SEED_DATABASE=false
MOCK_EMAIL_SENDING=true